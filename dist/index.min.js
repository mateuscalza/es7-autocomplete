/*!
 * Autocomplete v3.0.0
 * Created by Mateus Calza.
 * With Inovadora Sistemas support.
 *
 * Licensed MIT.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.AutoComplete=e()}}(function(){var e,t,n;return function e(t,n,o){function i(s,l){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,r=function e(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},s=function e(t){if(!t||"[object Object]"!==i.call(t))return!1;var n=o.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return"undefined"==typeof s||o.call(t,s)};t.exports=function e(){var t,n,o,i,l,a,u=arguments[0],c=1,p=arguments.length,d=!1;for("boolean"==typeof u?(d=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});c<p;++c)if(t=arguments[c],null!=t)for(n in t)o=u[n],i=t[n],u!==i&&(d&&i&&(s(i)||(l=r(i)))?(l?(l=!1,a=o&&r(o)?o:[]):a=o&&s(o)?o:{},u[n]=e(d,a,i)):"undefined"!=typeof i&&(u[n]=i));return u}},{}],2:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("extend"),u=o(a),c=e("./PresentText"),p=o(c),d=e("./Icon"),f=o(d),h=e("./Panel"),m=o(h),y=e("../sources/SelectSource"),v=o(y),b=e("../core/Core"),g=o(b),w=e("../mixins/Events"),O=o(w),x=e("../mixins/Finding"),S=o(x),k=e("../mixins/PanelControl"),I=o(k),P=e("../mixins/Selecting"),_=o(P),T=e("../mixins/Positioning"),C=o(T),E=e("../util/debounce"),j=o(E),R=e("../util/dom"),A=(0,_.default)((0,I.default)((0,S.default)((0,C.default)((0,O.default)(g.default))))),N=function(e){function t(e){i(this,t);var n=e.hiddenInput,o=e.textInput,s=e.source,l=e.selectInput,a=e.style,c=void 0===a?{}:a,d=e.customText,h=void 0===d||d,y=e.debounceTime,b=void 0===y?600:y,g=e.queryParam,w=void 0===g?"q":g,O=e.minLength,x=void 0===O?1:O,S=e.clearOnType,k=void 0!==S&&S,I=e.autoFind,P=void 0!==I&&I,_=e.autoSelectWhenOneResult,T=void 0===_||_,C=e.emptyItem,E=e.messages,A=void 0===E?{}:E,N=e.references,M=void 0===N?{}:N,q=e.otherParams,F=void 0===q?{}:q,V=e.showValue,W=void 0===V||V,L=e.valueInOthersAs,D=void 0===L?"ID":L,B=r(this,Object.getPrototypeOf(t).call(this,e));if(B.key=t.currentSerialKey++,B.finding=!1,B.open=!1,B.typing=!1,B.ignoreFocus=!1,B.ignoreBlur=!1,B.valueOnOpen=void 0,B.usedOtherFields=[],B.direction="down",B.references=M,B.otherParams=F,B.queryParam=w,B.clearOnType=k,B.autoFind=P,B.minLength=x,B.showValue=W,B.customText=h,B.autoSelectWhenOneResult=T,B.valueInOthersAs=D,B.emptyItem="undefined"!=typeof C?C:!n.hasAttribute("required")&&!o.hasAttribute("required"),!s&&!l)throw new Error("Set a source or a selectInput.");return B.source=s||new v.default(l),B.style=(0,u.default)({hiddenInput:"ac-hidden-input",textInput:"ac-text-input",panel:"ac-panel",listWrapper:"ac-list-wrapper",item:"ac-item",emptyItem:"ac-empty-item",customTextItem:"ac-custom-text-item",additional:"ac-additional",searchInput:"ac-search-input",searchInputWrapper:"ac-search-input-wrapper",presentText:"ac-present-text",presentCropText:"ac-present-crop-text",presentTextItems:"ac-present-items",presentInnerText:"ac-present-inner-text",presentInnerValue:"ac-present-inner-value",errorView:"ac-error-view",errorViewWrapper:"ac-error-view-wrapper",wrapper:"ac-wrapper",top:"ac-top",bottom:"ac-bottom",openWrapper:"ac-wrapper ac-open-wrapper",rightIcon:"fa fa-search ac-icon",loadingRightIcon:"fa fa-spinner ac-icon ac-loading-icon"},c),B.messages=(0,u.default)({searchPlaceholder:"Search...",emptyItemName:"Empty"},A),B.elements={hiddenInput:n,textInput:o,wrapper:(0,R.div)({className:B.style.wrapper})},B.debouncedFind=(0,j.default)(B.find.bind(B),b),B.debouncedLayoutChange=(0,j.default)(B.layoutChange.bind(B),250),B.components={presentText:new p.default({style:B.style},{},B),icon:new f.default({style:B.style}),panel:new m.default({style:B.style},{onSelect:B.select.bind(B)},B)},B.prepareElements(),B}return s(t,e),l(t,[{key:"prepareElements",value:function e(){this.elements.wrapper.setAttribute("tabindex","0"),this.value=this.elements.hiddenInput.value,this.content=this.elements.textInput.value,this.elements.textInput.parentNode.insertBefore(this.elements.wrapper,this.elements.textInput.nextSibling),this.elements.hiddenInput.parentNode.removeChild(this.elements.hiddenInput),this.elements.textInput.parentNode.removeChild(this.elements.textInput),this.elements.hiddenInput.autoComplete=this,this.elements.hiddenInput.type="hidden",this.elements.hiddenInput.className=this.style.hiddenInput,this.elements.hiddenInput.dataset.autocompleteKey=this.key,this.elements.textInput.autoComplete=this,this.elements.textInput.type="hidden",this.elements.textInput.className=this.style.textInput,this.elements.textInput.dataset.autocompleteTextKey=this.key,this.components.presentText.value(this.value),this.components.presentText.text(this.content),this.elements.wrapper.appendChild(this.elements.hiddenInput),this.elements.wrapper.appendChild(this.elements.textInput),this.elements.wrapper.appendChild(this.components.presentText.element),this.elements.wrapper.appendChild(this.components.icon.element),this.elements.wrapper.appendChild(this.components.panel.element),this.prepareEvents()}}]),t}(A);n.default=N},{"../core/Core":9,"../mixins/Events":11,"../mixins/Finding":12,"../mixins/PanelControl":13,"../mixins/Positioning":14,"../mixins/Selecting":15,"../sources/SelectSource":18,"../util/debounce":20,"../util/dom":21,"./Icon":4,"./Panel":6,"./PresentText":7,extend:1}],3:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("extend"),l=o(s),a=e("../sources/SelectSource"),u=o(a),c=e("../util/dom"),p=function(){function e(t){var n=t.style;i(this,e),this.elements={},this.elements.wrapper=(0,c.div)({className:n.errorViewWrapper},this.elements.error=(0,c.div)({className:n.errorView})),this.hide()}return r(e,[{key:"show",value:function e(t){this.elements.error.innerText=t,this.elements.wrapper.style.display="block"}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}}]),e}();n.default=p},{"../sources/SelectSource":18,"../util/dom":21,extend:1}],4:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("extend"),l=o(s),a=e("../sources/SelectSource"),u=o(a),c=e("../util/dom"),p=e("../util/events"),d=function(){function e(t){var n=t.style;i(this,e),this.style=n,this.element=(0,c.i)({className:n.rightIcon})}return r(e,[{key:"loadingStart",value:function e(){this.element.className=this.style.loadingRightIcon}},{key:"loadingStop",value:function e(){this.element.className=this.style.rightIcon}}]),e}();n.default=d},{"../sources/SelectSource":18,"../util/dom":21,"../util/events":22,extend:1}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("extend"),a=o(l),u=e("../sources/SelectSource"),c=o(u),p=e("../util/dom"),d=function(){function e(t,n,o){var i=t.style,s=n.onSelect;r(this,e),this.elements={},this.onSelect=s,this.autocomplete=o,this.style=i,this.items=null,this.selectedIndex=0,this.searchInput=null,this.elements.wrapper=(0,p.div)({className:i.listWrapper},this.elements.ul=(0,p.ul)()),this.hide()}return s(e,[{key:"show",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.items=t,this.elements.wrapper.style.display="block",this.render()}},{key:"render",value:function e(){var t=this;if(this.items&&this.autocomplete.open){this.elements.ul.innerHTML="",this.autocomplete.components.panel.element.style.maxHeight=null,this.searchInput=this.autocomplete.components.panel.components.searchInput;var n=this.items.length,o=0;if(this.autocomplete.emptyItem){var r=(0,p.div)({className:this.style.item+" "+this.style.emptyItem,innerText:this.autocomplete.messages.emptyItemName});this.prepareItemEvents(r,{content:null,value:null},o);var s=(0,p.li)({},r);this.elements.ul.appendChild(s),o++}var l=null,a=null,u=null;this.autocomplete.customText&&this.searchInput.value().trim().length&&(u=this.searchInput.value().trim(),l=(0,p.div)({className:this.style.item+" "+this.style.customTextItem,innerText:u}),a=(0,p.li)({},l),this.elements.ul.appendChild(a));for(var c=0;c<n;c++){var d=(0,p.span)({innerText:this.items[c].content}),f=null;this.items[c].additional&&this.items[c].additional.length&&(f="string"!=typeof this.autocomplete.valueInOthersAs?p.div.call.apply(p.div,[null,{}].concat(i(this.items[c].additional.map(function(e){var n=e.label,o=e.content;return(0,p.div)({className:t.style.additional},(0,p.strong)({innerText:n+": "}),(0,p.span)({innerText:o}))})))):p.div.call.apply(p.div,[null,{},(0,p.div)({className:this.style.additional},(0,p.strong)({innerText:this.autocomplete.valueInOthersAs+": "}),(0,p.span)({innerText:this.items[c].value}))].concat(i(this.items[c].additional.map(function(e){var n=e.label,o=e.content;return(0,p.div)({className:t.style.additional},(0,p.strong)({innerText:n+": "}),(0,p.span)({innerText:o}))})))));var h=(0,p.div)({className:this.style.item},d);f&&h.appendChild(f),this.prepareItemEvents(h,this.items[c],o);var m=(0,p.li)({},h);if(a?this.elements.ul.insertBefore(m,a):this.elements.ul.appendChild(m),o++,this.autocomplete.components.panel.element.getBoundingClientRect().height>this.autocomplete.heightSpace){this.elements.ul.removeChild(m),o--;break}}l&&(this.prepareItemEvents(l,{content:u,value:null},o),o++),this.autocomplete.components.panel.element.style.maxHeight=Math.max(110,this.autocomplete.heightSpace)+"px",this.items.length>=1?this.updateSelection(1):this.updateSelection(0)}}},{key:"prepareItemEvents",value:function e(t,n,o){var i=this;t.addEventListener("mouseenter",function(e){console.log(o),i.updateSelection(o)}),t.addEventListener("mousedown",function(e){console.log(o),i.updateSelection(o),i.onSelect(n),i.autocomplete.closePanel()})}},{key:"up",value:function e(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex-1)}},{key:"down",value:function e(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex+1)}},{key:"selectCurrent",value:function e(){this.autocomplete.emptyItem&&0==this.selectedIndex?this.onSelect({content:null,value:null}):this.autocomplete.customText&&this.selectedIndex==this.elements.ul.children.length-1&&this.searchInput.value().trim().length?this.onSelect({value:null,content:this.searchInput.value().trim()}):this.autocomplete.emptyItem?this.onSelect(this.items[this.selectedIndex-1]):this.onSelect(this.items[this.selectedIndex]),this.autocomplete.closePanel(),document.activeElement!=this.autocomplete.elements.wrapper&&(this.autocomplete.ignoreFocus=!0,console.log(this.autocomplete.elements.wrapper),this.autocomplete.elements.wrapper.focus())}},{key:"updateSelection",value:function e(t){var n=this.selectedIndex,o=this.elements.ul.children;this.selectedIndex=Math.max(0,Math.min(o.length-1,t));var i=o[n];i&&i.children[0].classList.remove("active"),o[this.selectedIndex].children[0].classList.add("active")}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}}]),e}();n.default=d},{"../sources/SelectSource":18,"../util/dom":21,extend:1}],6:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("extend"),l=o(s),a=e("../sources/SelectSource"),u=o(a),c=e("./SearchInput"),p=o(c),d=e("./ErrorView"),f=o(d),h=e("./List"),m=o(h),y=e("../util/dom"),v=function(){function e(t,n,o){var r=t.style,s=n.onSelect;i(this,e),this.components={searchInput:new p.default({style:r},(void 0),o),errorView:new f.default({style:r}),list:new m.default({style:r},{onSelect:s},o)},this.element=(0,y.div)({className:r.panel},this.components.searchInput.elements.wrapper,this.components.errorView.elements.wrapper,this.components.list.elements.wrapper)}return r(e,[{key:"show",value:function e(t){this.components.list.show(t.data)}},{key:"error",value:function e(t){var n=t.message;this.components.errorView.show(n)}},{key:"clear",value:function e(){this.components.errorView.hide(),this.components.list.hide()}}]),e}();n.default=v},{"../sources/SelectSource":18,"../util/dom":21,"./ErrorView":3,"./List":5,"./SearchInput":8,extend:1}],7:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("extend"),l=o(s),a=e("../sources/SelectSource"),u=o(a),c=e("../util/dom"),p=e("../util/events"),d=function(){function e(t,n,o){var r=t.style,s=r.presentText,l=r.presentInnerText,a=r.presentCropText,u=r.presentInnerValue,d=r.presentTextItems,f;i(this,e),this.autocomplete=o,this.elements={},this.elements.inner=(0,c.div)({className:l}),this.elements.innerValue=(0,c.div)({className:u}),this.elements.items=(0,c.div)({className:d},this.elements.innerValue,this.elements.inner),this.elements.crop=(0,c.div)({className:a},this.elements.items),this.element=(f=(f=(0,c.div)({className:s},this.elements.crop),p.on).call(f,"mouseenter",this.scrollToShow.bind(this)),p.on).call(f,"mouseout",this.scrollToHide.bind(this))}return r(e,[{key:"scrollToShow",value:function e(){this.autocomplete.open||(this.elements.items.style.webkitTransition="left linear 3s",this.elements.items.style.mozTransition="left linear 3s",this.elements.items.style.oTransition="left linear 3s",this.elements.items.style.transition="left linear 3s",this.elements.items.style.left="-"+Math.max(0,Math.floor(("none"===this.elements.innerValue.style.display?0:this.elements.innerValue.getBoundingClientRect().width)+this.elements.inner.getBoundingClientRect().width-this.elements.crop.getBoundingClientRect().width))+"px")}},{key:"scrollToHide",value:function e(){this.elements.items.style.webkitTransition="left linear 600ms",this.elements.items.style.mozTransition="left linear 600ms",this.elements.items.style.oTransition="left linear 600ms",this.elements.items.style.transition="left linear 600ms",this.elements.items.style.left="0px"}},{key:"text",value:function e(t){this.elements.inner.innerText=t}},{key:"value",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];this.autocomplete.showValue&&String(t).length?(this.elements.innerValue.innerText=t,this.elements.innerValue.style.display="inline-block"):this.elements.innerValue.style.display="none"}}]),e}();n.default=d},{"../sources/SelectSource":18,"../util/dom":21,"../util/events":22,extend:1}],8:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("extend"),l=o(s),a=e("../sources/SelectSource"),u=o(a),c=e("../util/dom"),p=function(){function e(t,n,o){var r=t.style;i(this,e),this.elements={},this.elements.input=(0,c.input)({className:r.searchInput,placeholder:o.messages.searchPlaceholder}),this.elements.wrapper=(0,c.div)({className:r.searchInputWrapper},this.elements.input)}return r(e,[{key:"value",value:function e(t){return"undefined"!=typeof t?(this.elements.input.value=t,this):this.elements.input.value}}]),e}();n.default=p},{"../sources/SelectSource":18,"../util/dom":21,extend:1}],9:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e)}return i(e,null,[{key:"byId",value:function e(t){return document.getElementById(t)}},{key:"byName",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],o=(this instanceof HTMLElement?this:document).getElementsByName(t);return o.length&&o[n]?o[n]:null}},{key:"autoCompleteByKey",value:function e(t){var n=document.querySelector('[data-autocomplete-key="'+t+'"]');if(!n)return null;if(!n.autoComplete)throw new Error("Field is not an autocomplete!",n);return n.autoComplete}},{key:"autoCompleteByName",value:function e(t){var n=AutoComplete.byName(t);if(!n)return null;if(!n.autoComplete)throw new Error("Field is not an autocomplete!",n);return n.autoComplete}},{key:"interpret",value:function e(t){return"true"===t||"false"!==t&&(isNaN(t)?t:+t)}},{key:"projectElementSettings",value:function e(t,n){var o=n.content,i=n.value,r=n.disabled,s=n.readonly,l=n.required,a=n.visibility,u=n.removed,c=n.label,p=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],d=p.defaultDisplayShow,f=void 0===d?"inline-block":d;if("undefined"==typeof i&&"undefined"!=typeof t.dataset.oldValue&&(i=t.dataset.oldValue),"undefined"!=typeof i&&("undefined"==typeof t.dataset.oldValue&&(t.dataset.oldValue=t.value),t.value=i,"undefined"!=typeof t.autoComplete&&(t.autoComplete.components.presentText.value(i||""),t.autoComplete.value=i)),"undefined"==typeof r&&"undefined"!=typeof t.dataset.oldDisabled&&(r=AutoComplete.interpret(t.dataset.oldDisabled)),"undefined"!=typeof r&&("undefined"==typeof t.dataset.oldDisabled&&(t.dataset.oldDisabled=t.disabled),t.disabled=r),"undefined"==typeof s&&"undefined"!=typeof t.dataset.oldReadOnly&&(s=AutoComplete.interpret(t.dataset.oldReadOnly)),"undefined"!=typeof s&&("undefined"==typeof t.dataset.oldReadOnly&&(t.dataset.oldReadOnly=t.readonly),t.readonly=s),"undefined"==typeof l&&"undefined"!=typeof t.dataset.oldRequired&&(l=AutoComplete.interpret(t.dataset.oldRequired)),"undefined"!=typeof l&&("undefined"==typeof t.dataset.oldRequired&&(t.dataset.oldRequired=t.required),t.required=l),"undefined"==typeof a&&"undefined"!=typeof t.dataset.oldVisibility&&(a=AutoComplete.interpret(t.dataset.oldVisibility)),"undefined"!=typeof a&&("undefined"==typeof t.dataset.oldVisibility&&(t.dataset.oldVisibility="none"!==t.style.display),t.style.display=a?f:"none"),"undefined"==typeof o&&"undefined"!=typeof t.dataset.oldContent&&(o=t.dataset.oldContent),"undefined"!=typeof o){var h=document.querySelector('[data-autocomplete-text-key="'+t.dataset.autocompleteKey+'"]');if(!h)throw new Error("Unknow text element to ",t);"undefined"==typeof t.dataset.oldContent&&(t.dataset.oldContent=h.value),h.autoComplete.content=o,h.autoComplete.components.presentText.text(o||" "),h.value=o}1==u&&t.parentNode.removeChild(t)}}]),e}();r.currentSerialKey=0,n.default=r},{}],10:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./components/AutoComplete"),r=o(i),s=e("./sources/Source"),l=o(s),a=e("./sources/AjaxSource"),u=o(a),c=e("./sources/SelectSource"),p=o(c),d=e("./sources/ArraySource"),f=o(d);r.default.AjaxSource=u.default,r.default.SelectSource=p.default,r.default.ArraySource=f.default,r.default.abstracts={Source:l.default},n.default=r.default,"undefined"!=typeof window&&(window.AutoCompleteWidget=r.default)},{"./components/AutoComplete":2,"./sources/AjaxSource":16,"./sources/ArraySource":17,"./sources/SelectSource":18,"./sources/Source":19}],11:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=e("../util/events"),a=e("../util/keys"),u=[a.ENTER,a.ARROW_DOWN,a.ARROW_UP,a.ARROW_LEFT,a.ARROW_RIGHT,a.SHIFT,a.TAB];n.default=function(e){return function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"prepareEvents",value:function e(){var t;(t=this.components.presentText.element,l.on).call(t,"click",this.iconOrTextClick.bind(this)),(t=this.components.icon.element,l.on).call(t,"click",this.iconOrTextClick.bind(this)),(t=this.elements.wrapper,l.on).call(t,"keyup",this.keyUp.bind(this)),(t=this.elements.wrapper,l.on).call(t,"keydown",this.keyDown.bind(this)),(t=this.elements.wrapper,l.on).call(t,"focus",this.wrapperFocus.bind(this)),(t=this.elements.wrapper,l.on).call(t,"mousedown",this.wrapperMouseDown.bind(this)),(t=this.elements.wrapper,l.on).call(t,"blur",this.blur.bind(this)),(t=this.components.panel.components.searchInput.elements.input,l.on).call(t,"blur",this.blur.bind(this)),(t=window,l.on).call(t,"scroll",this.scroll.bind(this)),(t=window,l.on).call(t,"resize",this.resize.bind(this)),this.debouncedLayoutChange()}},{key:"scroll",value:function e(){this.debouncedLayoutChange()}},{key:"resize",value:function e(){this.debouncedLayoutChange()}},{key:"layoutChange",value:function e(){if(this.open){var t=this.topSpace(),n=this.bottomSpace(),o=this.direction;console.log("topSpace: "+t+", bottomSpace: "+n),t>n&&n<300?this.direction="top":this.direction="bottom",o!==this.direction&&this.updateDirection(),"top"===this.direction?this.heightSpace=t:this.heightSpace=n,this.components.panel.components.list.render()}}},{key:"keyDown",value:function e(t){this.open&&t.keyCode==a.ARROW_UP?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.up()):this.open&&t.keyCode==a.ARROW_DOWN?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.down()):this.open&&t.keyCode==a.ENTER?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.selectCurrent()):this.open&&t.keyCode==a.TAB&&!t.shiftKey?this.components.panel.components.list.selectCurrent():t.keyCode==a.TAB&&t.shiftKey&&document.activeElement==this.components.panel.components.searchInput.elements.input&&(this.ignoreFocus=!0)}},{key:"keyUp",value:function e(t){t.keyCode===a.ESC?(this.closePanel(),this.ignoreFocus=!0,this.elements.wrapper.focus()):t.target===this.elements.wrapper&&t.keyCode==a.SPACE?(t.preventDefault(),t.stopPropagation(),this.togglePanel()):t.keyCode==a.ARROW_UP||t.keyCode==a.ARROW_DOWN||t.keyCode==a.ENTER?(t.preventDefault(),t.stopPropagation()):u.indexOf(t.keyCode)==-1&&(this.typing||(this.typing=!0,this.clearOnType&&this.select({content:null,value:null}),this.components.panel.clear()),this.debouncedFind())}},{key:"iconOrTextClick",value:function e(t){document.activeElement===this.elements.wrapper}},{key:"wrapperFocus",value:function e(t){console.log("focus... ignore focus?",this.ignoreFocus),t.isTrigger||this.ignoreFocus||this.openPanel(),this.ignoreFocus=!1}},{key:"blur",value:function e(t){if(!this.ignoreBlur){var n;if(this.value!==this.valueOnOpen){var o;this.valueOnOpen=this.value,(o=this.elements.hiddenInput,l.trigger).call(o,"change"),(o=this.elements.textInput,l.trigger).call(o,"change")}(n=this.elements.hiddenInput,l.trigger).call(n,"blur"),(n=this.elements.textInput,l.trigger).call(n,"blur"),this.closePanel()}this.ignoreBlur=!1}},{key:"wrapperMouseDown",value:function e(t){console.log("event.target",t.target),console.log("this.open",this.open),console.log("document.activeElement",document.activeElement),this.open||document.activeElement!==this.elements.wrapper?this.open&&document.activeElement===this.elements.wrapper?(console.log(2),this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.ignoreFocus=!0):document.activeElement===this.components.panel.components.searchInput.elements.input?(this.open&&this.closePanel(),this.ignoreFocus=!0,this.ignoreBlur=!0):(console.log(4),console.log("else")):(console.log(1),this.openPanel())}}]),t}(e)}},{"../util/events":22,"../util/keys":23}],12:[function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.default=function(e){return function(e){function t(){return i(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),a(t,[{key:"find",value:function e(){var t=this;return new Promise(function(e,n){t.finding&&(console.log("Let`s abort!"),t.source.abort(),t.findingEnd());var i=t.components.panel.components.searchInput.value();if(!(i.length<t.minLength)){t.findingStart();var r=l({},t.otherParams,o({},t.queryParam,i));Object.keys(t.references).forEach(function(e){if(!t.references[e])throw new Error("Reference "+e+" is not valid!");r[e]=t.references[e].value});var s={data:[]};t.source.find(r).then(function(e){s=e,t.components.panel.show(s),!t.autoSelectWhenOneResult||t.open&&t.emptyItem||!s||!s.data||1!=s.data.length?t.open||t.autoFind&&!(s&&s.data&&s.data.length>1)||t.openPanel():t.select({content:s.data[0].content,value:s.data[0].value}),t.findingEnd()}).catch(function(e){t.components.panel.error(e),!t.autoSelectWhenOneResult||t.open&&t.emptyItem||!s||!s.data||1!=s.data.length?t.open||t.autoFind&&!(s&&s.data&&s.data.length>1)||t.openPanel():t.select({content:s.data[0].content,value:s.data[0].value}),t.findingEnd()})}})}},{key:"findingStart",value:function e(){this.typing=!1,this.finding=!0,this.components.icon.loadingStart()}},{key:"findingEnd",value:function e(){this.finding=!1,this.components.icon.loadingStop()}}]),t}(e)}},{}],13:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.default=function(e){return function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"openPanel",value:function e(){this.open=!0,this.valueOnOpen=this.value,this.elements.wrapper.className=this.style.openWrapper,this.components.panel.element.style.display="inline-block",this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.components.panel.components.searchInput.elements.input.setSelectionRange(0,this.components.panel.components.searchInput.elements.input.value.length),this.autoFind&&this.debouncedFind(),this.components.presentText.scrollToHide(),this.layoutChange(),this.updateDirection()}},{key:"closePanel",value:function e(){this.open=!1,this.elements.wrapper.className=this.style.wrapper,this.components.panel.element.style.display="none",
this.layoutChange(),this.updateDirection()}},{key:"togglePanel",value:function e(){this.open?this.closePanel():this.openPanel()}}]),t}(e)}},{}],14:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n.default=function(e){return function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"topSpace",value:function e(){return this.elements.wrapper.offsetTop-window.scrollY}},{key:"bottomSpace",value:function e(){return window.innerHeight-(this.topSpace()+this.elements.wrapper.getBoundingClientRect().height)}},{key:"updateDirection",value:function e(){console.log("direction: "+this.direction),"top"===this.direction?(this.elements.wrapper.classList.remove(this.style.bottom),this.elements.wrapper.classList.add(this.style.top)):(this.elements.wrapper.classList.remove(this.style.top),this.elements.wrapper.classList.add(this.style.bottom))}}]),t}(e)}},{}],15:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=e("../components/AutoComplete"),u=o(a);n.default=function(e){return function(e){function t(){return i(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"select",value:function e(t){var n=t.content,o=t.value,i=t.additional,r=t.others;this.value=o,this.content=n,this.elements.hiddenInput.value=o||"",this.elements.textInput.value=n||"",this.components.presentText.value(o||""),this.components.presentText.text(n||" "),this.setOrClearOtherFields(r)}},{key:"setOrClearOtherFields",value:function e(){for(var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=t.length,o=this.usedOtherFields.slice(0),i=0;i<n;i++){var r=this.usedOtherFields.indexOf(t[i].field),s=document.querySelector('[name="'+t[i].field+'"]');if(!s)throw new Error("Element of other field '"+t[i].field+"' not found!");u.default.projectElementSettings(s,t[i]),r===-1?this.usedOtherFields[this.usedOtherFields.length]=t[i].field:o.splice(o.indexOf(t[i].field),1)}for(var l=o.length,a=0;a<l;a++){var c=document.querySelector('[name="'+o[a]+'"]');u.default.projectElementSettings(c,{})}}}]),t}(e)}},{"../components/AutoComplete":2}],16:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("./Source"),l=o(s),a=function(){function e(t){i(this,e),this.url=t,this.request=null}return r(e,[{key:"prepareRequest",value:function e(t){this.request=new XMLHttpRequest;var n=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");this.request.open("GET",this.url+"?"+n,!0)}},{key:"abort",value:function e(){this.request&&this.request.abort&&this.request.abort()}},{key:"send",value:function e(){var t=this;return new Promise(function(e,n){t.request.onreadystatechange=function(){if(console.log("readyState change",t.request.readyState,t.request.status,t.request),4==t.request.readyState&&200==t.request.status){var o=JSON.parse(t.request.responseText);t.request=null,e(o)}else 4==t.request.readyState&&200!=t.request.status&&n(new Error(t.request.responseText))},t.request.send()})}},{key:"find",value:function e(t){return this.prepareRequest(t),this.send()}}]),e}();n.default=a},{"./Source":19}],17:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("./Source"),l=o(s),a=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];i(this,e),this.data=t}return r(e,[{key:"find",value:function e(t){var n=this,o=t.value;return new Promise(function(e){e({data:n.data})})}}]),e}();n.default=a},{"./Source":19}],18:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=e("./Source"),l=o(s),a=function(){function e(){i(this,e)}return r(e,[{key:"find",value:function e(t){var n=t.value;return new Promise(function(e){return e()})}}]),e}();n.default=a},{"./Source":19}],19:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){o(this,e)}return i(e,[{key:"find",value:function e(t){var n=t.value;return new Promise(function(e,t){return t(new Error("Source class is abstract!"))})}},{key:"abort",value:function e(){}}]),e}();n.default=r},{}],20:[function(e,t,n){"use strict";function o(e,t,n){var o;return function(){var i=this,r=arguments,s=function t(){o=null,n||e.apply(i,r)},l=n&&!o;clearTimeout(o),o=setTimeout(s,t),l&&e.apply(i,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},{}],21:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=document.createElement(e);(0,h.default)(n,t);for(var o=arguments.length,i=Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];return i.forEach(function(e){n.appendChild(e)}),n}function r(e){return i("input",e)}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["div",e].concat(n))}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["ul",e].concat(n))}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["li",e].concat(n))}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["strong",e].concat(n))}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["a",e].concat(n))}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["i",e].concat(n))}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["strong",e].concat(n))}function d(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,["span",e].concat(n))}Object.defineProperty(n,"__esModule",{value:!0}),n.elem=i,n.input=r,n.div=s,n.ul=l,n.li=a,n.strong=u,n.a=c,n.i=p,n.strong=u,n.span=d;var f=e("extend"),h=o(f)},{extend:1}],22:[function(e,t,n){"use strict";function o(e){if(window.CustomEvent){var t=new CustomEvent(e);t.isTrigger=!0,this.dispatchEvent(t)}else if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),t.isTrigger=!0,this.dispatchEvent(t)}else this.fireEvent("on"+e)}function i(e,t){return this.addEventListener(e,t),this}Object.defineProperty(n,"__esModule",{value:!0}),n.trigger=o,n.on=i},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=n.ENTER=13,i=n.SPACE=32,r=n.ESC=27,s=n.ARROW_UP=38,l=n.ARROW_DOWN=40,a=n.ARROW_RIGHT=39,u=n.ARROW_LEFT=37,c=n.TAB=9,p=n.SHIFT=16},{}]},{},[10])(10)});