/*!
 * StormBox Responsive Autocomplete v3.0.0
 * Created by Mateus Calza.
 * With Inovadora Sistemas support.
 *
 * Licensed MIT.
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.StormBox=e()}}(function(){var e,t,n;return function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=function e(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)},s=function e(t){if(!t||"[object Object]"!==o.call(t))return!1;var n=i.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var s;for(s in t);return"undefined"==typeof s||i.call(t,s)};t.exports=function e(){var t,n,i,o,a,l,u=arguments[0],c=1,p=arguments.length,h=!1;for("boolean"==typeof u?(h=u,u=arguments[1]||{},c=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});c<p;++c)if(t=arguments[c],null!=t)for(n in t)i=u[n],o=t[n],u!==o&&(h&&o&&(s(o)||(a=r(o)))?(a?(a=!1,l=i&&r(i)?i:[]):l=i&&s(i)?i:{},u[n]=e(h,l,o)):"undefined"!=typeof o&&(u[n]=o));return u}},{}],2:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("../util/dom"),s=function(){function e(t){var n=t.style;i(this,e),this.elements={},this.elements.wrapper=(0,r.div)({className:n.errorViewWrapper},this.elements.error=(0,r.div)({className:n.errorView})),this.hide()}return o(e,[{key:"show",value:function e(t){this.elements.error.innerText=t,this.elements.wrapper.style.display="block"}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}}]),e}();n.default=s},{"../util/dom":26}],3:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("extend"),a=i(s),l=e("../sources/SelectSource"),u=i(l),c=e("../util/dom"),p=e("../util/events"),h=function(){function e(t){var n=t.style;o(this,e),this.style=n,this.element=(0,c.i)({className:n.rightIcon})}return r(e,[{key:"loadingStart",value:function e(){this.element.className=this.style.loadingRightIcon}},{key:"loadingStop",value:function e(){this.element.className=this.style.rightIcon}}]),e}();n.default=h},{"../sources/SelectSource":23,"../util/dom":26,"../util/events":27,extend:1}],4:[function(e,t,n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../util/dom"),a=function(){function e(t,n,i){var r=t.style,a=n.onSelect;o(this,e),this.elements={},this.onSelect=a,this.autocomplete=i,this.style=r,this.items=null,this.selectedIndex=0,this.searchInput=null,this.lastSelectedIndex=null,this.elements.wrapper=(0,s.div)({className:r.listWrapper},this.elements.ul=(0,s.ul)()),this.hide()}return r(e,[{key:"show",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.lastSelectedIndex=null,this.items=t,this.elements.wrapper.style.display="block",this.render()}},{key:"render",value:function e(){var t=this;if(this.items&&this.autocomplete.open){this.autocomplete.components.panel.components.pagination.show(),this.elements.ul.innerHTML="",this.autocomplete.components.panel.element.style.maxHeight=null,this.searchInput=this.autocomplete.components.panel.components.searchInput;var n=this.items.length,o=0;if(this.autocomplete.emptyItem){var r=(0,s.div)({className:this.style.item+" "+this.style.emptyItem,innerText:this.autocomplete.messages.emptyItemName});this.prepareItemEvents(r,{content:null,value:null},o);var a=(0,s.li)({},r);this.elements.ul.appendChild(a),o++}var l=null,u=null,c=null;this.autocomplete.customText&&this.searchInput.value().trim().length&&(c=this.searchInput.value().trim(),l=(0,s.div)({className:this.style.item+" "+this.style.customTextItem,innerText:c}),u=(0,s.li)({},l),this.elements.ul.appendChild(u));for(var p=0,h=this.autocomplete.components.panel.components.pagination.offset;h<n;h++){var f=(0,s.span)({innerText:this.items[h].content}),d=null;this.items[h].additional&&this.items[h].additional.length&&(d="string"==typeof this.autocomplete.valueInOthersAs&&this.autocomplete.showValue?s.div.call.apply(s.div,[null,{},(0,s.div)({className:this.style.additional},(0,s.strong)({innerText:this.autocomplete.valueInOthersAs+": "}),(0,s.span)({innerText:this.items[h].value}))].concat(i(this.items[h].additional.map(function(e){var n=e.label,i=e.content;return(0,s.div)({className:t.style.additional},(0,s.strong)({innerText:n+": "}),(0,s.span)({innerText:i}))})))):s.div.call.apply(s.div,[null,{}].concat(i(this.items[h].additional.map(function(e){var n=e.label,i=e.content;return(0,s.div)({className:t.style.additional},(0,s.strong)({innerText:n+": "}),(0,s.span)({innerText:i}))})))));var m=(0,s.i)();(this.autocomplete.multiple&&this.autocomplete.value.indexOf(String(this.items[h].value))!==-1||!this.autocomplete.multiple&&this.autocomplete.value==this.items[h].value)&&(m.className=this.style.alreadySelected);var y=(0,s.div)({className:this.style.item},m,f);d&&y.appendChild(d),this.prepareItemEvents(y,this.items[h],o);var v=(0,s.li)({},y);if(u?this.elements.ul.insertBefore(v,u):this.elements.ul.appendChild(v),o++,p++,this.autocomplete.components.panel.element.getBoundingClientRect().height>this.autocomplete.heightSpace&&p>this.autocomplete.minItemsLength){this.elements.ul.removeChild(v),o--,p--;break}this.autocomplete.components.panel.components.pagination.perPage=p}(!this.autocomplete.paginationData||this.autocomplete.paginationData.total<=p)&&this.autocomplete.components.panel.components.pagination.hide(),l&&(this.prepareItemEvents(l,{content:c,value:null},o),o++),this.autocomplete.components.panel.element.style.maxHeight=Math.max(110,this.autocomplete.heightSpace)+"px",this.items.length>=1?this.updateSelection(null!==this.lastSelectedIndex?this.lastSelectedIndex:this.autocomplete.emptyItem?1:0):this.updateSelection(0)}}},{key:"prepareItemEvents",value:function e(t,n,i){var o=this;t.addEventListener("mouseenter",function(e){o.updateSelection(i)}),t.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation(),o.updateSelection(i),o.onSelect(n),o.autocomplete.multiple||o.autocomplete.closePanel()})}},{key:"up",value:function e(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex-1)}},{key:"down",value:function e(){this.elements.ul.children.length&&this.updateSelection(this.selectedIndex+1)}},{key:"selectCurrent",value:function e(){this.items&&(this.autocomplete.emptyItem&&0==this.selectedIndex?this.onSelect({content:null,value:null}):this.autocomplete.customText&&this.selectedIndex==this.elements.ul.children.length-1&&this.searchInput.value().trim().length?this.onSelect({value:null,content:this.searchInput.value().trim()}):this.autocomplete.emptyItem?this.onSelect(this.items[this.selectedIndex-1]):this.onSelect(this.items[this.selectedIndex]),this.autocomplete.closePanel(),document.activeElement!=this.autocomplete.elements.wrapper&&(this.autocomplete.ignoreFocus=!0,this.autocomplete.elements.wrapper.focus()))}},{key:"updateSelection",value:function e(t){var n=this.selectedIndex,i=this.elements.ul.children;if(t<0)return this.autocomplete.components.panel.components.pagination.prev();if(t>i.length-1)return this.autocomplete.components.panel.components.pagination.next();this.lastSelectedIndex=t,this.selectedIndex=t;var o=i[n];o&&o.children[0].classList.remove("active"),i[this.selectedIndex].children[0].classList.add("active")}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}}]),e}();n.default=a},{"../util/dom":26}],5:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("../util/dom"),s=e("../util/events"),a=function(){function e(t,n,o){var s=t.style,a=n.onSelect;i(this,e),this.autocomplete=o,this.style=s,this.children={},this.children.ul=(0,r.ul)({}),this.element=(0,r.div)({className:s.multipleWrapper},this.children.ul)}return o(e,[{key:"render",value:function e(){var t=this;if(!this.autocomplete.hiddenInputName||!this.autocomplete.textInputName)throw new Error('Params "hiddenInputName" and "textInputName" are required when multiple.');this.children.ul.innerHTML="",this.autocomplete.value.forEach(function(e,n){var i=(0,r.button)({},(0,r.i)({className:t.style.multipleItemRemoveIcon}));s.on.call(i,"click",function(e){e.preventDefault(),t.autocomplete.remove(n)});var o=(0,r.strong)({innerText:e+": "}),a=(0,r.span)({innerText:t.autocomplete.content[n]}),l=(0,r.input)({type:"hidden",name:t.autocomplete.hiddenInputName+"[]",value:e}),u=(0,r.input)({type:"hidden",name:t.autocomplete.textInputName+"[]",value:t.autocomplete.content[n]}),c=void 0;c=t.autocomplete.showValue?(0,r.li)({},i,o,a,l,u):(0,r.li)({},i,a,l,u),t.children.ul.appendChild(c)}),this.autocomplete.value.length?this.element.style.display="block":this.element.style.display="none"}}]),e}();n.default=a},{"../util/dom":26,"../util/events":27}],6:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("../util/dom"),s=e("../util/events"),a=function(){function e(t,n,o){var s=t.style,a=n.onSelect;i(this,e),this.currentStep=0,this.end=!1,this.steps=[],this.offset=0,this.perPage=1/0,this.autocomplete=o,this.elements={},this.elements.goLeft=(0,r.div)({className:s.paginationLeft},(0,r.i)({className:s.paginationGoLeftIcon})),this.elements.goRight=(0,r.div)({className:s.paginationRight},(0,r.i)({className:s.paginationGoRightIcon})),this.elements.wrapper=(0,r.div)({className:s.paginationWrapper},this.elements.goLeft,this.elements.goRight),this.prepareEvents()}return o(e,[{key:"prepareEvents",value:function e(){var t,n=this;(t=this.elements.goLeft,s.on).call(t,"mousedown",function(e){e.preventDefault(),n.prev(),n.autocomplete.components.panel.components.searchInput.elements.input.focus()}),(t=this.elements.goRight,s.on).call(t,"mousedown",function(e){e.preventDefault(),n.next(),n.autocomplete.components.panel.components.searchInput.elements.input.focus()})}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}},{key:"show",value:function e(){this.elements.wrapper.style.display="block"}},{key:"next",value:function e(){var t=this,n=this.autocomplete.components.panel.components.list.items;if("undefined"==typeof n[this.offset+this.perPage]){if(this.end)return;this.feed(this.offset+this.perPage).then(function(e){e.length?(n.push.apply(n,e),t.currentStep++,t.offset=t.steps[t.currentStep]=t.offset+t.perPage,t.autocomplete.components.panel.components.list.render()):t.end=!0})}else this.currentStep++,this.offset=this.steps[this.currentStep]=this.offset+this.perPage,this.autocomplete.components.panel.components.list.render()}},{key:"prev",value:function e(){0!==this.currentStep&&(this.currentStep--,this.offset=this.steps[this.currentStep]||0,this.autocomplete.components.panel.components.list.render())}},{key:"feed",value:function e(t){return this.autocomplete.feed(t)}}]),e}();n.default=a},{"../util/dom":26,"../util/events":27}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../components/StormBox"),a=i(s),l=e("./SearchInput"),u=i(l),c=e("./ErrorView"),p=i(c),h=e("./WarningView"),f=i(h),d=e("./List"),m=i(d),y=e("./Pagination"),v=i(y),g=e("../util/dom"),b=function(){function e(t,n,i){var r=t.style,s=n.onSelect;o(this,e),this.autocomplete=i,this.components={searchInput:new u.default({style:r},(void 0),i),errorView:new p.default({style:r}),warningView:new f.default({style:r}),list:new m.default({style:r},{onSelect:s},i),pagination:new v.default({style:r},{onSelect:s},i)},this.element=(0,g.div)({className:r.panel},this.components.searchInput.elements.wrapper,this.components.errorView.elements.wrapper,this.components.warningView.elements.wrapper,this.components.pagination.elements.wrapper,this.components.list.elements.wrapper)}return r(e,[{key:"show",value:function e(t){return 0===t.data.length?void this.warning({message:this.autocomplete.messages.noData}):(this.components.pagination.currentStep=0,this.components.pagination.offset=0,this.components.pagination.perPage=1/0,void this.components.list.show(t.data))}},{key:"error",value:function e(t){this.components.list.hide(),this.components.warningView.hide(),console.error(t),this.components.errorView.show(a.default.truncate(a.default.responseToText(t.message)))}},{key:"warning",value:function e(t){this.components.list.hide(),this.components.errorView.hide(),this.components.warningView.show(a.default.truncate(a.default.responseToText(t.message)))}},{key:"clear",value:function e(){this.components.errorView.hide(),this.components.warningView.hide(),this.components.list.hide()}}]),e}();n.default=b},{"../components/StormBox":10,"../util/dom":26,"./ErrorView":2,"./List":4,"./Pagination":6,"./SearchInput":9,"./WarningView":11}],8:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("../util/dom"),s=e("../util/events"),a=function(){function e(t,n,o){var a=t.style,l=a.presentText,u=a.presentInnerText,c=a.presentCropText,p=a.presentInnerValue,h=a.presentTextItems,f;i(this,e),this.autocomplete=o,this.elements={},this.elements.inner=(0,r.div)({className:u}),this.elements.innerValue=(0,r.div)({className:p}),this.elements.items=(0,r.div)({className:h},this.elements.innerValue,this.elements.inner),this.elements.crop=(0,r.div)({className:c},this.elements.items),(f=(f=this.autocomplete.elements.wrapper,s.on).call(f,"mouseenter",this.scrollToShow.bind(this)),s.on).call(f,"mouseleave",this.scrollToHide.bind(this)),this.element=(0,r.div)({className:l},this.elements.crop)}return o(e,[{key:"scrollToShow",value:function e(){this.autocomplete.open||(this.elements.items.style.webkitTransition="left linear 3s",this.elements.items.style.mozTransition="left linear 3s",this.elements.items.style.oTransition="left linear 3s",this.elements.items.style.transition="left linear 3s",this.elements.items.style.left="-"+Math.max(0,Math.floor(("none"===this.elements.innerValue.style.display?0:this.elements.innerValue.getBoundingClientRect().width)+this.elements.inner.getBoundingClientRect().width-this.elements.crop.getBoundingClientRect().width))+"px")}},{key:"scrollToHide",value:function e(t){this.elements.items.style.webkitTransition="left linear 600ms",this.elements.items.style.mozTransition="left linear 600ms",this.elements.items.style.oTransition="left linear 600ms",this.elements.items.style.transition="left linear 600ms",this.elements.items.style.left="0px"}},{key:"text",value:function e(t){this.elements.inner.innerText=t}},{key:"value",value:function e(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];this.autocomplete.showValue&&String(t).length?(this.elements.innerValue.innerText=t,this.elements.innerValue.style.display="inline-block"):this.elements.innerValue.style.display="none"}}]),e}();n.default=a},{"../util/dom":26,"../util/events":27}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("extend"),a=i(s),l=e("../sources/SelectSource"),u=i(l),c=e("../util/dom"),p=function(){function e(t,n,i){var r=t.style;o(this,e),this.elements={},this.elements.input=(0,c.input)({className:r.searchInput,placeholder:i.messages.searchPlaceholder}),this.elements.wrapper=(0,c.div)({className:r.searchInputWrapper},this.elements.input)}return r(e,[{key:"value",value:function e(t){return"undefined"!=typeof t?(this.elements.input.value=t,this):this.elements.input.value}}]),e}();n.default=p},{"../sources/SelectSource":23,"../util/dom":26,extend:1}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("extend"),u=i(l),c=e("./PresentText"),p=i(c),h=e("./Icon"),f=i(h),d=e("./Multiple"),m=i(d),y=e("./Panel"),v=i(y),g=e("../sources/SelectSource"),b=i(g),w=e("../core/Core"),x=i(w),O=e("../mixins/Events"),I=i(O),S=e("../mixins/Finding"),E=i(S),k=e("../mixins/PanelControl"),T=i(k),P=e("../mixins/Selecting"),C=i(P),_=e("../mixins/Positioning"),j=i(_),N=e("../mixins/Replica"),R=i(N),A=e("../mixins/Interface"),M=i(A),q=e("../util/debounce"),L=i(q),V=e("../util/dom"),B=e("../util/use"),F=i(B),W=function(e){function t(e){o(this,t);var n=e.hiddenInput,i=e.textInput,s=e.source,a=e.selectInput,l=e.style,c=void 0===l?{}:l,h=e.customText,d=void 0!==h&&h,y=e.debounceTime,g=void 0===y?600:y,w=e.queryParam,x=void 0===w?"q":w,O=e.minLength,I=void 0===O?1:O,S=e.clearOnType,E=void 0!==S&&S,k=e.autoFind,T=void 0!==k&&k,P=e.autoSelectWhenOneResult,C=void 0===P||P,_=e.emptyItem,j=e.messages,N=void 0===j?{}:j,R=e.references,A=void 0===R?{}:R,M=e.otherParams,q=void 0===M?{}:M,B=e.showValue,F=void 0===B||B,W=e.valueInOthersAs,D=void 0===W?"ID":W,H=e.minItemsLength,U=void 0===H?1:H,K=e.multiple,G=void 0!==K&&K,z=e.anchorElement,X=void 0===z?null:z,J=e.distinct,Y=void 0===J||J,Q=e.hiddenInputName,Z=void 0===Q?null:Q,$=e.textInputName,ee=void 0===$?null:$,te=e.softErrors,ne=void 0!==te&&te,ie=e.disabled,oe=void 0!==ie&&ie,re=e.readOnly,se=void 0!==re&&re,ae=r(this,Object.getPrototypeOf(t).call(this,e));if(ae.key=t.currentSerialKey++,ae.finding=!1,ae.open=!1,ae.typing=!1,ae.ignoreFocus=!1,ae.ignoreBlur=!1,ae.lastParams=null,ae.valueOnOpen=void 0,ae.usedOtherFields=[],ae.paginationData=null,ae.direction="down",ae.disabled=oe,ae.readOnly=se,ae.multiple=G,ae.distinct=Y,ae.anchorElement=X,ae.references=A,ae.otherParams=q,ae.queryParam=x,ae.clearOnType=E,ae.autoFind=T,ae.minLength=I,ae.showValue=F,ae.customText=d,ae.softErrors=ne,ae.autoSelectWhenOneResult=C,ae.valueInOthersAs=D,ae.minItemsLength=U,ae.hiddenInputName=Z,ae.textInputName=ee,ae.emptyItem=_,G&&(ae.emptyItem=!1),!s&&!a)throw new Error("Set a source or a selectInput.");return ae.source=s||new b.default(a),ae.style=(0,u.default)({hiddenInput:"ac-hidden-input",textInput:"ac-text-input",panel:"ac-panel",listWrapper:"ac-list-wrapper",item:"ac-item",emptyItem:"ac-empty-item",customTextItem:"ac-custom-text-item",additional:"ac-additional",searchInput:"ac-search-input",searchInputWrapper:"ac-search-input-wrapper",presentText:"ac-present-text",presentCropText:"ac-present-crop-text",presentTextItems:"ac-present-items",presentInnerText:"ac-present-inner-text",presentInnerValue:"ac-present-inner-value",errorView:"ac-error-view",errorViewWrapper:"ac-error-view-wrapper",warningView:"ac-warning-view",warningViewWrapper:"ac-warning-view-wrapper",wrapper:"ac-wrapper",top:"ac-top",bottom:"ac-bottom",openWrapper:"ac-wrapper ac-open-wrapper",disabledWrapper:"ac-wrapper ac-disabled-wrapper",readOnlyWrapper:"ac-wrapper ac-read-only-wrapper",rightIcon:"fa fa-search ac-icon",loadingRightIcon:"fa fa-spinner ac-icon ac-loading-icon",disabledRightIcon:"fa fa-ban ac-icon",readOnlyRightIcon:"fa fa-info ac-icon",paginationWrapper:"ac-pagination-wrapper",paginationLeft:"ac-pagination-left",paginationRight:"ac-pagination-right",paginationGoLeftIcon:"fa fa-chevron-left",paginationGoRightIcon:"fa fa-chevron-right",multipleWrapper:"ac-multiple",multipleItemRemoveIcon:"fa fa-remove",alreadySelected:"fa fa-check-circle ac-already-selected"},c),ae.messages=(0,u.default)({searchPlaceholder:"Search...",emptyItemName:"No value",singularMultipleItems:"item",pluralMultipleItems:"items",noData:"No items"},N),ae.elements={hiddenInput:n,textInput:i,wrapper:(0,V.div)({className:ae.style.wrapper}),label:null},ae.debouncedFind=(0,L.default)(ae.find.bind(ae),g),ae.debouncedLayoutChange=(0,L.default)(ae.layoutChange.bind(ae),250),ae.components={presentText:new p.default({style:ae.style},{},ae),icon:new f.default({style:ae.style}),panel:new v.default({style:ae.style},{onSelect:ae.select.bind(ae)},ae),multiple:new m.default({style:ae.style},{onRemove:ae.remove.bind(ae)},ae)},ae.prepareElements(),ae}return s(t,e),a(t,[{key:"prepareElements",value:function e(){if(this.elements.wrapper.setAttribute("tabindex","0"),this.multiple){if(this.value=this.elements.hiddenInput.map(function(e){return e.value}),this.content=this.elements.textInput.map(function(e){return e.value}),!this.anchorElement&&this.elements.textInput[0]&&(this.anchorElement=this.elements.textInput[0]),!this.anchorElement)throw new Error("StormBox anchor element missing!");this.elements.label=t.findLabel(this.anchorElement)||null,this.anchorElement.parentNode.insertBefore(this.elements.wrapper,this.elements.textInput.nextSibling),this.relatedReplica(),this.elements.hiddenInput.forEach(function(e){return e.parentNode.removeChild(e)}),this.elements.textInput.forEach(function(e){return e.parentNode.removeChild(e)}),this.anchorElement.parentNode&&this.anchorElement.parentNode.removeChild(this.anchorElement),this.components.presentText.value(""),1===this.value.length?this.components.presentText.text(this.value.length+" "+this.messages.singularMultipleItems):this.value.length>1?this.components.presentText.text(this.value.length+" "+this.messages.pluralMultipleItems):this.components.presentText.text(" "),this.components.multiple.render(),this.elements.wrapper.appendChild(this.components.presentText.element),this.elements.wrapper.appendChild(this.components.icon.element),this.elements.wrapper.appendChild(this.components.panel.element),this.elements.wrapper.parentNode.insertBefore(this.components.multiple.element,this.elements.wrapper.nextSibling)}else this.value=this.elements.hiddenInput.value,this.content=this.elements.textInput.value,this.anchorElement||(this.anchorElement=this.elements.textInput),this.elements.label=t.findLabel(this.anchorElement)||null,this.anchorElement.parentNode.insertBefore(this.elements.wrapper,this.elements.textInput.nextSibling),this.relatedReplica(),this.elements.hiddenInput.parentNode.removeChild(this.elements.hiddenInput),this.elements.textInput.parentNode.removeChild(this.elements.textInput),this.anchorElement.parentNode&&this.anchorElement.parentNode.removeChild(this.anchorElement),this.elements.hiddenInput.autoComplete=this,this.elements.hiddenInput.type="hidden",this.elements.hiddenInput.className=this.style.hiddenInput,this.elements.hiddenInput.dataset.autocompleteKey=this.key,this.elements.textInput.autoComplete=this,this.elements.textInput.type="hidden",this.elements.textInput.className=this.style.textInput,this.elements.textInput.dataset.autocompleteTextKey=this.key,this.components.presentText.value(this.value),this.components.presentText.text(this.content),this.elements.wrapper.appendChild(this.elements.hiddenInput),this.elements.wrapper.appendChild(this.elements.textInput),this.elements.wrapper.appendChild(this.components.presentText.element),this.elements.wrapper.appendChild(this.components.icon.element),this.elements.wrapper.appendChild(this.components.panel.element);this.prepareEvents()}},{key:"relatedApply",value:function e(n){t.isArray(this.elements.textInput)||n(this.elements.textInput),t.isArray(this.elements.hiddenInput)||n(this.elements.hiddenInput),this.anchorElement!=this.elements.textInput&&this.anchorElement!=this.elements.hiddenInput&&n(this.anchorElement)}}]),t}((0,F.default)(x.default,I.default,j.default,E.default,T.default,C.default,M.default,R.default));n.default=W},{"../core/Core":12,"../mixins/Events":14,"../mixins/Finding":15,"../mixins/Interface":16,"../mixins/PanelControl":17,"../mixins/Positioning":18,"../mixins/Replica":19,"../mixins/Selecting":20,"../sources/SelectSource":23,"../util/debounce":25,"../util/dom":26,"../util/use":29,"./Icon":3,"./Multiple":5,"./Panel":7,"./PresentText":8,extend:1}],11:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("../util/dom"),s=function(){function e(t){var n=t.style;i(this,e),this.elements={},this.elements.wrapper=(0,r.div)({className:n.warningViewWrapper},this.elements.warning=(0,r.div)({className:n.warningView})),this.hide()}return o(e,[{key:"show",value:function e(t){this.elements.warning.innerText=t,this.elements.wrapper.style.display="block"}},{key:"hide",value:function e(){this.elements.wrapper.style.display="none"}}]),e}();n.default=s},{"../util/dom":26}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("../components/StormBox"),a=i(s),l=e("../util/dom"),u=function(){function e(){o(this,e)}return r(e,null,[{key:"byId",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return n.getElementById(t)}},{key:"byName",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=arguments.length<=2||void 0===arguments[2]?document:arguments[2],o=(this instanceof HTMLElement?this:i).getElementsByName(t);return o.length&&o[n]?o[n]:null}},{key:"byArrayName",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return Array.prototype.slice.call((this instanceof HTMLElement?this:n).getElementsByName(t+"[]"))}},{key:"allByName",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return Array.prototype.slice.call((this instanceof HTMLElement?this:n).getElementsByName(t))}},{key:"autoCompleteByKey",value:function e(t){var n=document.querySelector('[data-autocomplete-key="'+t+'"]');if(!n)return null;if(!n.autoComplete)throw new Error("Field is not an autocomplete!",n);return n.autoComplete}},{key:"isFrom",value:function e(t,n){for(;t;){if(t===n)return!0;t=t.parentNode}return!1}},{key:"findLabel",value:function e(t){var n=void 0;if(t.id&&(n=document.querySelector('label[for="'+t.id+'"]')))return n;for(var i=0;t;){if(++i>3)return!1;if("LABEL"===t.tagName)return t;t=t.parentNode}return!1}},{key:"autoCompleteByName",value:function e(t){var n=a.default.byName(t);if(!n)return null;if(!n.autoComplete)throw new Error("Field is not an autocomplete!",n);return n.autoComplete}},{key:"responseToText",value:function e(t){return(0,l.div)({innerHTML:t}).innerText.replace(/[\n\r]/g," ")}},{key:"truncate",value:function e(t){var n=arguments.length<=1||void 0===arguments[1]?320:arguments[1];return t=String(t).trim(),t.length>n?t.substr(0,n)+"...":t}},{key:"interpret",value:function e(t){return"true"===t||"false"!==t&&(isNaN(t)?t:+t)}},{key:"isArray",value:function e(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"projectElementSettings",value:function e(t,n){var i=n.content,o=n.value,r=n.disabled,s=n.readonly,l=n.required,u=n.visibility,c=n.removed,p=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],h=p.defaultDisplayShow,f=void 0===h?"inline-block":h,d=arguments[3];if("undefined"==typeof o&&"undefined"!=typeof t.dataset.oldValue&&(o=t.dataset.oldValue),"undefined"!=typeof o){if("checkbox"===t.getAttribute("type"))"undefined"==typeof t.dataset.oldValue&&(t.dataset.oldValue=t.checked),t.checked=a.default.interpret(o);else if("radio"===t.getAttribute("type")){if("undefined"==typeof t.dataset.oldValue){var m=a.default.allByName(t.name).filter(function(e){return e.checked});t.dataset.oldValue=m[0]?m[0].value:NaN}var y=a.default.allByName(t.name);y.forEach(function(e){return e.checked=!1,e}),y.filter(function(e){return e.value==o}).forEach(function(e){e.checked=!0})}else"undefined"==typeof t.dataset.oldValue&&(t.dataset.oldValue=t.value),t.value=o;"undefined"!=typeof t.autoComplete&&(t.autoComplete.components.presentText.value(o||""),
t.autoComplete.value=o)}if("undefined"==typeof r&&"undefined"!=typeof t.dataset.oldDisabled&&(r=a.default.interpret(t.dataset.oldDisabled)),"undefined"!=typeof r&&("undefined"==typeof t.dataset.oldDisabled&&(t.dataset.oldDisabled=!!t.disabled),t.disabled=r,"undefined"!=typeof t.autoComplete&&a.default.isArray(t.autoComplete.elements.textInput)?t.autoComplete.elements.textInput.forEach(function(e){e.disabled=r}):"undefined"!=typeof t.autoComplete&&(t.autoComplete.elements.textInput.disabled=r)),"undefined"==typeof s&&"undefined"!=typeof t.dataset.oldReadOnly&&(s=a.default.interpret(t.dataset.oldReadOnly)),"undefined"!=typeof s&&("undefined"==typeof t.dataset.oldReadOnly&&(t.dataset.oldReadOnly=!!t.readonly),t.readOnly=s,"undefined"!=typeof t.autoComplete&&a.default.isArray(t.autoComplete.elements.textInput)?t.autoComplete.elements.textInput.forEach(function(e){e.readOnly=s}):"undefined"!=typeof t.autoComplete&&(t.autoComplete.elements.textInput.readOnly=s)),"undefined"==typeof l&&"undefined"!=typeof t.dataset.oldRequired&&(l=a.default.interpret(t.dataset.oldRequired)),"undefined"!=typeof l&&("undefined"==typeof t.dataset.oldRequired&&(t.dataset.oldRequired=t.required),t.required=l,"undefined"!=typeof t.autoComplete&&a.default.isArray(t.autoComplete.elements.textInput)?t.autoComplete.elements.textInput.forEach(function(e){e.required=l}):"undefined"!=typeof t.autoComplete&&(t.autoComplete.elements.textInput.required=l)),"undefined"==typeof u&&"undefined"!=typeof t.dataset.oldVisibility&&(u=a.default.interpret(t.dataset.oldVisibility)),"undefined"!=typeof u&&("undefined"==typeof t.dataset.oldVisibility&&(t.dataset.oldVisibility="none"!==t.style.display),t.style.display=u?f:"none","undefined"!=typeof t.autoComplete&&a.default.isArray(t.autoComplete.elements.textInput)?t.autoComplete.elements.textInput.forEach(function(e){e.style.display=u?f:"none"}):"undefined"!=typeof t.autoComplete&&(t.autoComplete.elements.textInput.style.display=u?f:"none")),"undefined"==typeof i&&"undefined"!=typeof t.dataset.oldContent&&(i=t.dataset.oldContent),"undefined"!=typeof i){var v=document.querySelector('[data-autocomplete-text-key="'+t.dataset.autocompleteKey+'"]');if(!v){if(d)return console.warn("Unknow text element to ",t);throw new Error("Unknow text element to ",t)}"undefined"==typeof t.dataset.oldContent&&(t.dataset.oldContent=v.value),v.autoComplete.content=i,v.autoComplete.components.presentText.text(i||" "),v.value=i}1==c&&t.parentNode.removeChild(t)}}]),e}();u.currentSerialKey=0,n.default=u,window.isFrom=u.isFrom},{"../components/StormBox":10,"../util/dom":26}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./components/StormBox"),r=i(o),s=e("./sources/Source"),a=i(s),l=e("./sources/AjaxSource"),u=i(l),c=e("./sources/SelectSource"),p=i(c),h=e("./sources/ArraySource"),f=i(h);r.default.AjaxSource=u.default,r.default.SelectSource=p.default,r.default.ArraySource=f.default,r.default.abstracts={Source:a.default},n.default=r.default,"undefined"!=typeof window&&(window.StormBoxWidget=r.default)},{"./components/StormBox":10,"./sources/AjaxSource":21,"./sources/ArraySource":22,"./sources/SelectSource":23,"./sources/Source":24}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../components/StormBox"),u=i(l),c=e("../util/events"),p=e("../util/keys"),h=[p.ENTER,p.ARROW_DOWN,p.ARROW_UP,p.ARROW_LEFT,p.ARROW_RIGHT,p.SHIFT,p.TAB];n.default=function(e){return function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),a(t,[{key:"prepareEvents",value:function e(){var t;(t=this.components.presentText.element,c.on).call(t,"click",this.iconOrTextClick.bind(this)),(t=this.components.icon.element,c.on).call(t,"click",this.iconOrTextClick.bind(this)),(t=this.elements.wrapper,c.on).call(t,"keyup",this.keyUp.bind(this)),(t=this.elements.wrapper,c.on).call(t,"keydown",this.keyDown.bind(this)),(t=this.elements.wrapper,c.on).call(t,"focus",this.wrapperFocus.bind(this)),(t=this.elements.wrapper,c.on).call(t,"mousedown",this.wrapperMouseDown.bind(this)),(t=this.elements.wrapper,c.on).call(t,"blur",this.blur.bind(this)),(t=this.components.panel.components.searchInput.elements.input,c.on).call(t,"blur",this.blur.bind(this)),(t=window,c.on).call(t,"scroll",this.scroll.bind(this)),(t=window,c.on).call(t,"resize",this.resize.bind(this)),this.elements.label&&(t=this.elements.label,c.on).call(t,"mousedown",this.labelMouseDown.bind(this)),this.debouncedLayoutChange()}},{key:"scroll",value:function e(){this.debouncedLayoutChange()}},{key:"resize",value:function e(){this.debouncedLayoutChange()}},{key:"layoutChange",value:function e(){if(this.open){var t=this.topSpace(),n=this.bottomSpace(),i=this.direction;t>n&&n<300?this.direction="top":this.direction="bottom",i!==this.direction&&this.updateDirection(),"top"===this.direction?this.heightSpace=t:this.heightSpace=n,this.components.panel.components.list.render()}}},{key:"keyDown",value:function e(t){this.open&&t.keyCode==p.ARROW_UP?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.up()):this.open&&t.keyCode==p.ARROW_DOWN?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.down()):this.open&&t.keyCode==p.ENTER?(t.preventDefault(),t.stopPropagation(),this.components.panel.components.list.selectCurrent()):this.open&&t.keyCode==p.TAB&&!t.shiftKey?this.components.panel.components.list.selectCurrent():t.keyCode==p.TAB&&t.shiftKey&&document.activeElement==this.components.panel.components.searchInput.elements.input&&(this.ignoreFocus=!0)}},{key:"keyUp",value:function e(t){t.keyCode===p.ESC?(this.closePanel(),this.ignoreFocus=!0,this.elements.wrapper.focus()):t.target===this.elements.wrapper&&t.keyCode==p.SPACE?(t.preventDefault(),t.stopPropagation(),this.togglePanel()):t.keyCode==p.ARROW_UP||t.keyCode==p.ARROW_DOWN||t.keyCode==p.ENTER?(t.preventDefault(),t.stopPropagation()):h.indexOf(t.keyCode)==-1&&(this.typing||(this.typing=!0,this.clearOnType&&this.select({content:null,value:null}),this.components.panel.clear()),this.debouncedFind())}},{key:"iconOrTextClick",value:function e(t){document.activeElement===this.elements.wrapper}},{key:"wrapperFocus",value:function e(t){t.isTrigger||this.ignoreFocus||this.openPanel(),this.ignoreFocus=!1}},{key:"blur",value:function e(){if(!this.ignoreBlur){if(!u.default.isArray(this.elements.hiddenInput)){var t;if(this.value!==this.valueOnOpen){var n;this.valueOnOpen=this.value,(n=this.elements.hiddenInput,c.trigger).call(n,"change"),(n=this.elements.textInput,c.trigger).call(n,"change")}(t=this.elements.hiddenInput,c.trigger).call(t,"blur"),(t=this.elements.textInput,c.trigger).call(t,"blur")}this.closePanel()}this.ignoreBlur=!1}},{key:"wrapperMouseDown",value:function e(t){if(this.open||document.activeElement!==this.elements.wrapper)if(this.open&&document.activeElement===this.elements.wrapper)this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.ignoreFocus=!0;else{if(u.default.isFrom(t.target,this.components.panel.components.pagination.elements.goLeft)||u.default.isFrom(t.target,this.components.panel.components.pagination.elements.goRight)||t.target==this.components.panel.components.searchInput.elements.input)return;document.activeElement===this.components.panel.components.searchInput.elements.input?(this.open&&u.default.isFrom(t.target,this.components.presentText.element)&&(this.ignoreFocus=!0),this.closePanel(),this.ignoreBlur=!0):(this.ignoreFocus=!1,this.ignoreBlur=!1)}else this.openPanel()}},{key:"labelMouseDown",value:function e(t){u.default.isFrom(t.target,this.elements.wrapper)||this.multiple&&u.default.isFrom(t.target,this.components.multiple.element)||(t.preventDefault(),t.stopPropagation(),this.elements.wrapper.focus())}}]),t}(e)}},{"../components/StormBox":10,"../util/events":27,"../util/keys":28}],15:[function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.default=function(e){return function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"find",value:function e(){var t=this;return new Promise(function(){t.finding&&(t.source.abort(),t.findingEnd());var e=t.components.panel.components.searchInput.value();if(!(e.length<t.minLength)){t.findingStart();var n=a({},t.otherParams,i({},t.queryParam,e));Object.keys(t.references).forEach(function(e){if(!t.references[e]){if(t.softErrors)return console.warn("Reference "+e+" is not valid!");throw new Error("Reference "+e+" is not valid!")}n[e]=t.references[e].value});var o={data:[]};t.source.find(n).then(function(e){"aborted"!==e&&(t.lastParams=n,o=e,t.paginationData=e.pagination,t.components.panel.show(o),!t.autoSelectWhenOneResult||t.open&&t.emptyItem||!o||!o.data||1!=o.data.length?t.open||t.autoFind&&!(o&&o.data&&o.data.length>1)||t.openPanel():t.select({content:o.data[0].content,value:o.data[0].value}),t.findingEnd())}).catch(function(e){e instanceof Error?t.components.panel.error(e):t.components.panel.warning(e),!t.autoSelectWhenOneResult||t.open&&t.emptyItem||!o||!o.data||1!=o.data.length?t.open||t.autoFind&&!(o&&o.data&&o.data.length>1)||t.openPanel():t.select({content:o.data[0].content,value:o.data[0].value}),t.findingEnd()})}})}},{key:"feed",value:function e(t){var n=this;return this.finding&&(this.source.abort(),this.findingEnd()),this.findingStart(),this.source.find(a({},this.lastParams,{offset:t})).then(function(e){return"aborted"===e?[]:(n.findingEnd(),e.data)}).catch(function(e){n.components.panel.error(e),n.findingEnd()})}},{key:"findingStart",value:function e(){this.typing=!1,this.finding=!0,this.components.icon.loadingStart()}},{key:"findingEnd",value:function e(){this.finding=!1,this.components.icon.loadingStop()}}]),t}(e)}},{}],16:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.default=function(e){return function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"enable",value:function e(){this.disabled&&(this.disabled=!1,this.readOnly||(this.elements.wrapper.setAttribute("tabindex","0"),this.elements.wrapper.className=this.style.wrapper,this.components.icon.element.className=this.style.rightIcon,this.relatedApply(function(e){return e.disabled=!1})))}},{key:"disable",value:function e(){this.disabled||(this.disabled=!0,this.elements.wrapper.removeAttribute("tabindex"),this.closePanel(),this.elements.wrapper.className=this.style.disabledWrapper,this.components.icon.element.className=this.style.disabledRightIcon,this.relatedApply(function(e){return e.disabled=!0}))}},{key:"canReadAndWrite",value:function e(){this.readOnly&&(this.readOnly=!1,this.disabled||(this.elements.wrapper.setAttribute("tabindex","0"),this.elements.wrapper.className=this.style.wrapper,this.components.icon.element.className=this.style.rightIcon,this.relatedApply(function(e){return e.readOnly=!1})))}},{key:"canRead",value:function e(){this.readOnly||(this.readOnly=!0,this.elements.wrapper.removeAttribute("tabindex"),this.closePanel(),this.elements.wrapper.className=this.style.readOnlyWrapper,this.components.icon.element.className=this.style.readOnlyRightIcon,this.relatedApply(function(e){return e.readOnly=!0}))}},{key:"required",value:function e(){this.emptyItem===!1||this.multiple||(this.emptyItem=!1,this.closePanel(),this.relatedApply(function(e){return e.required=!0}))}},{key:"optional",value:function e(){this.emptyItem!==!0&&(this.emptyItem=!0,this.closePanel(),this.relatedApply(function(e){return e.required=!1}))}}]),t}(e)}},{}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.default=function(e){return function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"openPanel",value:function e(){this.disabled||this.readOnly||(this.open=!0,this.valueOnOpen=this.value,this.elements.wrapper.className=this.style.openWrapper,this.components.panel.element.style.display="inline-block",this.ignoreBlur=!0,this.components.panel.components.searchInput.elements.input.focus(),this.components.panel.components.searchInput.elements.input.setSelectionRange(0,this.components.panel.components.searchInput.elements.input.value.length),this.autoFind&&this.debouncedFind(),this.components.presentText.scrollToHide(),this.layoutChange(),this.updateDirection())}},{key:"closePanel",value:function e(){this.open&&(this.open=!1,this.elements.wrapper.className=this.style.wrapper,this.components.panel.element.style.display="none",this.layoutChange(),this.updateDirection())}},{key:"togglePanel",value:function e(){this.open?this.closePanel():this.openPanel()}}]),t}(e)}},{}],18:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n.default=function(e){return function(e){function t(){return i(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),s(t,[{key:"topSpace",value:function e(){return this.elements.wrapper.offsetTop-window.scrollY}},{key:"bottomSpace",value:function e(){return window.innerHeight-(this.topSpace()+this.elements.wrapper.getBoundingClientRect().height)}},{key:"updateDirection",value:function e(){"top"===this.direction?(this.elements.wrapper.classList.remove(this.style.bottom),this.elements.wrapper.classList.add(this.style.top)):(this.elements.wrapper.classList.remove(this.style.top),this.elements.wrapper.classList.add(this.style.bottom))}}]),t}(e)}},{}],19:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../components/StormBox"),u=i(l);n.default=function(e){return function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),a(t,[{key:"relatedReplica",value:function e(){var t=this;this.relatedApply(function(e){return t.replica(e)})}},{key:"replica",value:function e(t){(t.disabled||t.hasAttribute("disabled"))&&this.disable(),(t.readOnly||t.hasAttribute("readonly"))&&this.canRead(),(t.required||t.hasAttribute("required"))&&this.required()}}]),t}(e)}},{"../components/StormBox":10}],20:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=e("../components/StormBox"),u=i(l);n.default=function(e){return function(e){function t(){return o(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),a(t,[{key:"select",value:function e(t){var n=t.content,i=t.value,o=t.additional,r=t.others;if(this.multiple){var s=void 0;console.log("this.distinct",this.distinct),this.distinct&&(s=this.value.indexOf(String(i)))!==-1?(this.value.splice(s,1),this.content.splice(s,1)):(this.value.push(String(i)),this.content.push(String(n))),this.components.multiple.render(),this.components.panel.components.list.render(),this.components.presentText.value(""),1===this.value.length?this.components.presentText.text(this.value.length+" "+this.messages.singularMultipleItems):this.value.length>1?this.components.presentText.text(this.value.length+" "+this.messages.pluralMultipleItems):this.components.presentText.text(" ")}else this.value=i,this.content=n,this.elements.hiddenInput.value=i||"",this.elements.textInput.value=n||"",this.components.presentText.value(i||""),this.components.presentText.text(n||" "),this.setOrClearOtherFields(r)}},{key:"remove",value:function e(t){this.value.splice(t,1),this.content.splice(t,1),this.components.multiple.render(),this.components.panel.components.list.render(),this.components.presentText.value(""),1===this.value.length?this.components.presentText.text(this.value.length+" "+this.messages.singularMultipleItems):this.value.length>1?this.components.presentText.text(this.value.length+" "+this.messages.pluralMultipleItems):this.components.presentText.text(" ")}},{key:"setOrClearOtherFields",value:function e(){for(var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0],n=t.length,i=this.usedOtherFields.slice(0),o=0;o<n;o++){var r=this.usedOtherFields.indexOf(t[o].field),s=document.querySelector('[name="'+t[o].field+'"]');if(!s){if(this.softErrors)return console.warn("Element of other field '"+t[o].field+"' not found!");throw new Error("Element of other field '"+t[o].field+"' not found!")}u.default.projectElementSettings(s,t[o],this.softErrors),r===-1?this.usedOtherFields[this.usedOtherFields.length]=t[o].field:i.splice(i.indexOf(t[o].field),1)}for(var a=i.length,l=0;l<a;l++){var c=document.querySelector('[name="'+i[l]+'"]');u.default.projectElementSettings(c,{},this.softErrors)}}}]),t}(e)}},{"../components/StormBox":10}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return Object.keys(e).map(function(n){if("object"===l(e[n])&&null!==e[n])return s(e[n],[].concat(r(t),[n]));var i=[].concat(r(t),[n]),o=i.shift();return encodeURIComponent(o+(i.length?"["+i.join("][")+"]":""))+"="+encodeURIComponent(e[n])}).join("&")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=e("./Source"),c=i(u),p=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]||arguments[1],i=arguments.length<=2||void 0===arguments[2]?null:arguments[2];o(this,e),this.url=t,this.request=null,this.headerXMLHttpRequest=n,this.beforeSend=i}return a(e,[{key:"prepareRequest",value:function e(t){this.request=new XMLHttpRequest;var n=s(t);this.request.open("GET",this.url+"?"+n,!0),this.headerXMLHttpRequest&&this.request.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.beforeSend&&this.beforeSend(this.request)}},{key:"abort",value:function e(){this.request&&this.request.abort&&this.request.abort()}},{key:"send",value:function e(){var t=this;return new Promise(function(e,n){t.request.onreadystatechange=function(){if(4==t.request.readyState){if(0==t.request.status)return e("aborted");if(200==t.request.status){var i=void 0;try{i=JSON.parse(t.request.responseText)}catch(o){return n(new Error("Parsing Error: invalid response. "+t.request.responseText.replace(/\n/,"")))}t.request=null,e(i)}else{var r="Error Code: "+t.request.status;try{var s=JSON.parse(t.request.responseText);if(r+=t.request.statusText&&t.request.statusText.trim().length?"; Status: "+t.request.statusText:"",s.message){if(t.request.status>=400&&t.request.status<500)return n(s);r+=s.message&&s.message.trim().length?"; Status: "+s.message.trim():""}else r+=t.request.responseText&&t.request.responseText.trim().length?"; Status: "+t.request.responseText.trim():""}catch(o){r+=t.request.statusText&&t.request.statusText.trim().length?"; Status: "+t.request.statusText:"",r+=t.request.responseText&&t.request.responseText.trim().length?"; Status: "+t.request.responseText.trim():""}n(new Error(r))}}},t.request.send()})}},{key:"find",value:function e(t){return this.prepareRequest(t),this.send()}}]),e}();n.default=p},{"./Source":24}],22:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./Source"),a=i(s),l=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];o(this,e),this.data=t}return r(e,[{key:"find",value:function e(t){var n=this,i=t.value;return new Promise(function(e){e({data:n.data})})}}]),e}();n.default=l},{"./Source":24}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=e("./Source"),a=i(s),l=function(){function e(){o(this,e)}return r(e,[{key:"find",value:function e(t){var n=t.value;return new Promise(function(e){return e()})}}]),e}();n.default=l},{"./Source":24}],24:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return o(e,[{key:"find",value:function e(t){var n=t.value;return new Promise(function(e,t){return t(new Error("Source class is abstract!"))})}},{key:"abort",value:function e(){}}]),e}();n.default=r},{}],25:[function(e,t,n){"use strict";function i(e,t,n){var i;return function(){var o=this,r=arguments,s=function t(){i=null,n||e.apply(o,r)},a=n&&!i;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(o,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{}],26:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=document.createElement(e);(0,m.default)(n,t);for(var i=arguments.length,o=Array(i>2?i-2:0),r=2;r<i;r++)o[r-2]=arguments[r];return o.forEach(function(e){n.appendChild(e)}),n}function r(e){return o("input",e)}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["div",e].concat(n))}function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["ul",e].concat(n))}function l(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["li",e].concat(n))}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["strong",e].concat(n))}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["a",e].concat(n))}function p(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["i",e].concat(n))}function u(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["strong",e].concat(n))}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["span",e].concat(n))}function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return o.apply(void 0,["button",e].concat(n))}Object.defineProperty(n,"__esModule",{value:!0}),n.elem=o,n.input=r,n.div=s,n.ul=a,n.li=l,n.strong=u,n.a=c,n.i=p,n.strong=u,n.span=h,n.button=f;var d=e("extend"),m=i(d)},{extend:1}],27:[function(e,t,n){"use strict";function i(e){if(window.CustomEvent){var t=new CustomEvent(e);t.isTrigger=!0,this.dispatchEvent(t)}else if(document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!1),t.isTrigger=!0,this.dispatchEvent(t)}else this.fireEvent("on"+e)}function o(e,t){return this.addEventListener(e,t),this}Object.defineProperty(n,"__esModule",{value:!0}),n.trigger=i,n.on=o},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=n.ENTER=13,o=n.SPACE=32,r=n.ESC=27,s=n.ARROW_UP=38,a=n.ARROW_DOWN=40,l=n.ARROW_RIGHT=39,u=n.ARROW_LEFT=37,c=n.TAB=9,p=n.SHIFT=16},{}],29:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=arguments.length<=0||void 0===arguments[0]?function(){function e(){i(this,e)}return e}():arguments[0],t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return n.reduce(function(e,t){return t(e)},e)}},{}]},{},[13])(13)});